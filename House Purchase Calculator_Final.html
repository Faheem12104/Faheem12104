<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>House Purchase Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f2f5;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }

        h1 {
            text-align: center;
            color: white;
            background-color: #003366;
            padding: 10px;
            margin: 0 0 20px;
            border-radius: 5px;
            font-size: 48px;
        }

        h2 {
            font-size: 32px;
            color: white;
            margin-bottom: 15px;
            text-align: center;
            border: 2px solid black;
            background-color: #8B4513;
            padding: 10px;
            border-radius: 5px;
        }

        .grid-container {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
        }

        .section {
            text-align: left;
            padding: 30px;
            font-size: 24px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }

        .section label {
            display: block;
            font-size: 20px;
            color: #333;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .section input,
        .section select {
            width: 100%;
            padding: 8px;
            font-size: 18px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .section p {
            font-size: 18px;
            color: #666;
            margin-bottom: 10px;
        }

        .payment-section,
        .breakdown-section {
            text-align: left;
            padding: 30px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }

        .payment-item,
        .break-down {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 5px;
            border: 1px solid #ccc;
        }

        .payment-item label,
        .break-down label {
            font-size: 18px;
            color: #333;
            font-weight: bold;
            margin-right: 10px;
        }

        .amount {
            font-size: 18px;
            font-weight: bold;
            color: #003366;
            margin: 0;
            padding: 5px 10px;
            background-color: #e0f0f6;
            border-radius: 5px;
        }

        .description {
            margin: 0;
            text-align: left;
        }

        .calculate-button {
            display: block;
            width: 100%;
            padding: 10px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            margin-top: 20px;
        }

        .calculate-button:hover {
            background-color: #218838;
        }

        .result-section h3 {
            font-size: 18px;
            color: white;
            background-color: #c0392b;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 4px;
        }

        .result-section p {
            font-size: 24px;
            font-weight: bold;
            background-color: #ecf0f1;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
            text-align: center;
        }
    </style>
</head>

<body>

    <div class="container">
        <h1>House Purchase Calculator</h1>

        <div class="grid-container">
            <!-- Left Section for Inputs -->
            <div class="section input-section">
                <h2>Input</h2>
                <label for="housePrice">House Price (€):</label>
                <p>Please enter the total value of the house.</p>
                <input type="number" id="housePrice" onchange="updateValues()">

                <label for="depositPercent">Deposit %:</label>
                <p>Enter the percentage of the house price you will deposit (minimum 10%).</p>
                <input type="number" id="depositPercent" onchange="checkDepositPercent()">

                <label for="depositAmount">Deposit (€):</label>
                <p>Auto-calculated based on house price.</p>
                <input type="text" id="depositAmount" value="€0.00" readonly>

                <label for="loanYears">Loan Terms (Years):</label>
                <p>Select the number of years for your mortgage.</p>
                <select id="loanYears"></select>
                <!-- Options will be populated by JavaScript -->

                <label for="startDate">Start Date:</label>
                <p>Select the start date of your mortgage.</p>
                <input type="date" id="startDate">

                <label for="minInterestRate">Minimum Interest Rate (%):</label>
                <p>Enter the interest rate.</p>
                <input type="number" id="minInterestRate">

                <label for="loanAmount">Loan Amount (€):</label>
                <p>Calculated automatically based on the deposit amount.</p>
                <input type="text" id="loanAmount" value="€0.00" readonly>
            </div>

            <!-- Middle Section for One-Time Payments -->
            <div class="section payment-section">
                <h2>One-Time Payments</h2>
                <div class="payment-item">
                    <label for="stampDuty">Stamp Duty:</label>
                    <p id="stampDuty" class="amount">€0.00</p>
                </div>
                <p class="description">This represents 1% of the house price.</p>

                <div class="payment-item">
                    <label for="solicitorFees">Solicitor Fees:</label>
                    <p id="solicitorFees" class="amount">€0.00</p>
                </div>
                <p class="description">This represents 1% of the house price, ranging between €1500 - €3000.</p>

                <div class="payment-item">
                    <label for="surveyor">Surveyor:</label>
                    <p id="surveyor" class="amount">€0.00</p>
                </div>
                <p class="description">This represents 0.2% of the house price, with the amount ranging between €300 and €700.</p>

                <div class="payment-item">
                    <label for="propertyValuation">Property Valuation:</label>
                    <p id="propertyValuation" class="amount">€0.00</p>
                </div>
                <p class="description">This represents 0.08% of the house price, with the amount ranging between €150 - €250.</p>

                <div class="payment-item">
                    <label for="mortgageArrangementFee">Mortgage Arrangement Fee:</label>
                    <p id="mortgageArrangementFee" class="amount">€0.00</p>
                </div>
                <p class="description">This represents 0.5% of the house price, with the amount ranging between €0 - €1500.</p>

                <div class="payment-item">
                    <label for="mortgageBrokerFees">Mortgage Broker Fees:</label>
                    <p id="mortgageBrokerFees" class="amount">€0.00</p>
                </div>
                <p class="description">This represents 0.2% of the house price, with the amount ranging between €500 - €2000.</p>

                <div class="payment-item">
                    <label for="berCertificate">BER Certificate:</label>
                    <p id="berCertificate" class="amount">€0.00</p>
                </div>
                <p class="description">This represents 0.08% of the house price, with the amount ranging between €150 - €300.</p>

                <div class="payment-item">
                    <label for="registrationFees">Registration Fees:</label>
                    <p id="registrationFees" class="amount">€0.00</p>
                </div>
                <p class="description">This represents 0.27% of the house price, with the amount ranging between €400 - €800.</p>
            </div>

            <!-- Right Section for Break Down -->
            <div class="section breakdown-section">
                <h2>Break Down</h2>
                <div class="break-down">
                    <label for="monthlyRepayment">Monthly Payment:</label>
                    <p id="monthlyRepayment" class="amount">€0.00</p>
                </div>
                <p class="description">Monthly payment for your mortgage.</p>

                <div class="break-down">
                    <label for="totalPayment">Total Payment:</label>
                    <p id="totalPayment" class="amount">€0.00</p>
                </div>
                <p class="description">Total payment for your mortgage.</p>

                <div class="break-down">
                    <label for="costOfCredit">Cost of Credit:</label>
                    <p id="costOfCredit" class="amount">€0.00</p>
                </div>
                <p class="description">Total cost of credit for your mortgage.</p>

                <button class="calculate-button" onclick="calculateInvestment()">Calculate</button>
            </div>
        </div>
    </div>

    <script>
        function formatCurrency(value) {
            return new Intl.NumberFormat('en-IE', {
                style: 'currency',
                currency: 'EUR',
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            }).format(value);
        }

        function checkDepositPercent() {
            const depositPercent = parseFloat(document.getElementById("depositPercent").value);
            if (depositPercent < 10) {
                alert("Deposit % cannot be less than 10%.");
                document.getElementById("depositPercent").value = '';
                document.getElementById("depositAmount").value = formatCurrency(0);
                document.getElementById("loanAmount").value = formatCurrency(0);
            } else {
                updateValues();
            }
        }

        function updateValues() {
            const housePrice = parseFloat(document.getElementById("housePrice").value) || 0;
            const depositPercent = parseFloat(document.getElementById("depositPercent").value) || 0;
            const depositAmount = housePrice * (depositPercent / 100);
            document.getElementById("depositAmount").value = formatCurrency(depositAmount);

            // Calculate Loan Amount
            const loanAmount = housePrice - depositAmount;
            document.getElementById("loanAmount").value = formatCurrency(loanAmount);
        }

        function calculateInvestment() {
            const housePrice = parseFloat(document.getElementById("housePrice").value) || 0;
            const depositAmount = parseFloat(document.getElementById("depositAmount").value.replace('€', '').replace(',', '')) || 0;
            const loanYears = parseInt(document.getElementById("loanYears").value) || 0;
            const minInterestRate = parseFloat(document.getElementById("minInterestRate").value) / 100 || 0;

            if (!housePrice || !loanYears || !minInterestRate) {
                alert("Please fill in all required fields.");
                return;
            }

            // Monthly interest rate
            const monthlyInterestRate = minInterestRate / 12;
            const loanAmount = housePrice - depositAmount;

            // PMT formula: Monthly Repayment
            const monthlyRepayment = (loanAmount * monthlyInterestRate) / (1 - Math.pow(1 + monthlyInterestRate, -loanYears * 12));
            document.getElementById("monthlyRepayment").textContent = formatCurrency(monthlyRepayment);

            // Total Payment = Monthly Repayment * Total Months
            const totalPayment = monthlyRepayment * (loanYears * 12);
            document.getElementById("totalPayment").textContent = formatCurrency(totalPayment);

            // Cost of Credit = Total Payment - Loan Amount
            const costOfCredit = totalPayment - loanAmount;
            document.getElementById("costOfCredit").textContent = formatCurrency(costOfCredit);

            // Update One-Time Payments
            const stampDuty = housePrice * 0.01;
            document.getElementById("stampDuty").textContent = formatCurrency(stampDuty);

            const solicitorFees = Math.min(Math.max(housePrice * 0.01, 1500), 3000);
            document.getElementById("solicitorFees").textContent = formatCurrency(solicitorFees);

            const surveyor = Math.min(Math.max(housePrice * 0.002, 300), 700);
            document.getElementById("surveyor").textContent = formatCurrency(surveyor);

            const propertyValuation = Math.min(Math.max(housePrice * 0.0008, 150), 250);
            document.getElementById("propertyValuation").textContent = formatCurrency(propertyValuation);

            const mortgageArrangementFee = housePrice * 0.005;
            document.getElementById("mortgageArrangementFee").textContent = formatCurrency(mortgageArrangementFee);

            const mortgageBrokerFees = Math.min(Math.max(housePrice * 0.002, 500), 2000);
            document.getElementById("mortgageBrokerFees").textContent = formatCurrency(mortgageBrokerFees);

            const berCertificate = Math.min(Math.max(housePrice * 0.0008, 150), 300);
            document.getElementById("berCertificate").textContent = formatCurrency(berCertificate);

            const registrationFees = Math.min(Math.max(housePrice * 0.0027, 400), 800);
            document.getElementById("registrationFees").textContent = formatCurrency(registrationFees);
        }

        // Function to set the default date to today
        function setDefaultDate() {
            const today = new Date();
            const dd = String(today.getDate()).padStart(2, '0'); // Day
            const mm = String(today.getMonth() + 1).padStart(2, '0'); // Month (0-based)
            const yyyy = today.getFullYear(); // Year

            const currentDate = `${yyyy}-${mm}-${dd}`;
            document.getElementById('startDate').value = currentDate;
        }

        // Function to populate the loan years dropdown
        function populateLoanYears() {
            const loanYearsSelect = document.getElementById('loanYears');

            // Add options from 10 to 40 years
            for (let i = 10; i <= 40; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = `${i} years`;
                loanYearsSelect.appendChild(option);
            }

            // Set the default selection to the first option (10 years)
            loanYearsSelect.value = 30;
        }

        // Call the functions on page load
        window.onload = function() {
            setDefaultDate();
            populateLoanYears();
        };
    </script>

</body>

</html>
